import{S as a,i as r,s as e,e as t,t as s,a as o,y as c,b as l,f as n,g as f,d as i,c as h,z as d,h as v,j as m,k as u,A as p,m as E,N as g,D as $,E as D,F as y,J as I,R as T,V as b}from"./client.36844de2.js";import{r as V}from"./rupiah.1a14ef94.js";import{g as H}from"./api.e630a648.js";import{F as j}from"./FaPencilAlt.537b2edc.js";import{F as x}from"./FaTrash.51c15d68.js";import{f as _}from"./index.77267d23.js";import"./IconBase.52240270.js";import"./index.48dff1b4.js";function w(a,r,e){const t=a.slice();return t[10]=r[e],t[12]=e,t}function A(a){let r,e,I,T,b,H,_,w,A,S,B,L,k,F,N,O,P,M,C,R,U,W,z,J,Y,q,G,K,Q,X,Z,aa,ra=a[12]+1+"",ea=a[10].user.first_name+"",ta=a[6](a[10].created_at)+"",sa=V(parseInt(a[10].nominal))+"",oa=a[10].mode+"";function ca(){return a[7](a[10])}return z=new j({}),K=new x({}),{c(){r=t("tr"),e=t("td"),I=s(ra),T=o(),b=t("td"),H=t("a"),_=s(ea),A=o(),S=t("td"),B=s(ta),L=o(),k=t("td"),F=s(sa),N=o(),O=t("td"),P=s(oa),M=o(),C=t("td"),R=t("div"),U=t("a"),W=t("div"),c(z.$$.fragment),Y=o(),q=t("button"),G=t("div"),c(K.$$.fragment),Q=o(),this.h()},l(a){r=l(a,"TR",{});var t=n(r);e=l(t,"TD",{});var s=n(e);I=f(s,ra),s.forEach(i),T=h(t),b=l(t,"TD",{});var o=n(b);H=l(o,"A",{href:!0,class:!0});var c=n(H);_=f(c,ea),c.forEach(i),o.forEach(i),A=h(t),S=l(t,"TD",{});var v=n(S);B=f(v,ta),v.forEach(i),L=h(t),k=l(t,"TD",{});var m=n(k);F=f(m,sa),m.forEach(i),N=h(t),O=l(t,"TD",{class:!0});var u=n(O);P=f(u,oa),u.forEach(i),M=h(t),C=l(t,"TD",{});var p=n(C);R=l(p,"DIV",{class:!0});var E=n(R);U=l(E,"A",{href:!0,class:!0});var g=n(U);W=l(g,"DIV",{class:!0});var $=n(W);d(z.$$.fragment,$),$.forEach(i),g.forEach(i),Y=h(E),q=l(E,"BUTTON",{class:!0});var D=n(q);G=l(D,"DIV",{class:!0});var y=n(G);d(K.$$.fragment,y),y.forEach(i),D.forEach(i),E.forEach(i),p.forEach(i),Q=h(t),t.forEach(i),this.h()},h(){v(H,"href",w=`/app/employee/${a[10].user.id}/edit`),v(H,"class","just-link"),v(O,"class","lowercase"),v(W,"class","w-3 h-3 text-blue-500"),v(U,"href",J=`/app/ar/payment/${a[10].id}/edit`),v(U,"class","appearance-none rounded-full p-1 mr-2 hover:bg-gray-300"),v(G,"class","w-3 h-3 text-red-500"),v(q,"class","appearance-none rounded-full p-1 hover:bg-gray-300 mr-2"),v(R,"class","flex items-center justify-end")},m(a,t){m(a,r,t),u(r,e),u(e,I),u(r,T),u(r,b),u(b,H),u(H,_),u(r,A),u(r,S),u(S,B),u(r,L),u(r,k),u(k,F),u(r,N),u(r,O),u(O,P),u(r,M),u(r,C),u(C,R),u(R,U),u(U,W),p(z,W,null),u(R,Y),u(R,q),u(q,G),p(K,G,null),u(r,Q),X=!0,Z||(aa=E(q,"click",ca),Z=!0)},p(r,e){a=r,(!X||2&e)&&ea!==(ea=a[10].user.first_name+"")&&g(_,ea),(!X||2&e&&w!==(w=`/app/employee/${a[10].user.id}/edit`))&&v(H,"href",w),(!X||2&e)&&ta!==(ta=a[6](a[10].created_at)+"")&&g(B,ta),(!X||2&e)&&sa!==(sa=V(parseInt(a[10].nominal))+"")&&g(F,sa),(!X||2&e)&&oa!==(oa=a[10].mode+"")&&g(P,oa),(!X||2&e&&J!==(J=`/app/ar/payment/${a[10].id}/edit`))&&v(U,"href",J)},i(a){X||($(z.$$.fragment,a),$(K.$$.fragment,a),X=!0)},o(a){D(z.$$.fragment,a),D(K.$$.fragment,a),X=!1},d(a){a&&i(r),y(z),y(K),Z=!1,aa()}}}function S(a){let r,e,c,d,p,E,y,H,j,x,_,S,B,L,k,F,N,O,P,M,C,R,U,W,z,J,Y,q,G,K,Q,X,Z,aa,ra,ea,ta,sa,oa,ca,la,na,fa,ia,ha,da,va,ma,ua,pa,Ea,ga,$a,Da,ya,Ia,Ta,ba,Va,Ha,ja,xa,_a,wa,Aa,Sa,Ba,La,ka,Fa,Na,Oa,Pa,Ma,Ca,Ra,Ua,Wa,za,Ja,Ya=a[4].first_name+"",qa=a[6](a[3].created_at)+"",Ga=a[6](a[2].due_date)+"",Ka=V(parseInt(a[2].total))+"",Qa=a[1],Xa=[];for(let r=0;r<Qa.length;r+=1)Xa[r]=A(w(a,Qa,r));const Za=a=>D(Xa[a],1,1,(()=>{Xa[a]=null}));return{c(){r=t("div"),e=t("section"),c=t("div"),d=s("hutang / detail hutang #"),p=s(a[0]),E=o(),y=t("div"),H=o(),j=t("a"),x=s("tambah pembayaran"),S=o(),B=t("section"),L=t("h1"),k=s("Detail Hutang"),F=o(),N=t("ul"),O=t("li"),P=t("div"),M=s("Supplier"),C=o(),R=t("div"),U=t("a"),W=s(Ya),J=o(),Y=t("li"),q=t("div"),G=s("Tanggal Hutang"),K=o(),Q=t("div"),X=s(qa),Z=o(),aa=t("li"),ra=t("div"),ea=s("Batas Waktu"),ta=o(),sa=t("div"),oa=s(Ga),ca=o(),la=t("li"),na=t("div"),fa=s("Total Piutang"),ia=o(),ha=t("div"),da=s(Ka),va=o(),ma=t("li"),ua=t("div"),pa=s("Sudah Dibayar"),Ea=o(),ga=t("div"),$a=s(a[5]),Da=o(),ya=t("section"),Ia=t("h1"),Ta=s("Daftar Pembayaran"),ba=o(),Va=t("table"),Ha=t("thead"),ja=t("tr"),xa=t("th"),_a=s("no."),wa=o(),Aa=t("th"),Sa=s("admin"),Ba=o(),La=t("th"),ka=s("tanggal"),Fa=o(),Na=t("th"),Oa=s("nominal"),Pa=o(),Ma=t("th"),Ca=s("metode pembayaran"),Ra=o(),Ua=t("th"),Wa=o(),za=t("tbody");for(let a=0;a<Xa.length;a+=1)Xa[a].c();this.h()},l(t){r=l(t,"DIV",{class:!0});var s=n(r);e=l(s,"SECTION",{class:!0});var o=n(e);c=l(o,"DIV",{class:!0});var v=n(c);d=f(v,"hutang / detail hutang #"),p=f(v,a[0]),v.forEach(i),E=h(o),y=l(o,"DIV",{class:!0}),n(y).forEach(i),H=h(o),j=l(o,"A",{href:!0,class:!0});var m=n(j);x=f(m,"tambah pembayaran"),m.forEach(i),o.forEach(i),S=h(s),B=l(s,"SECTION",{class:!0});var u=n(B);L=l(u,"H1",{class:!0});var g=n(L);k=f(g,"Detail Hutang"),g.forEach(i),F=h(u),N=l(u,"UL",{});var $=n(N);O=l($,"LI",{class:!0});var D=n(O);P=l(D,"DIV",{});var I=n(P);M=f(I,"Supplier"),I.forEach(i),C=h(D),R=l(D,"DIV",{});var T=n(R);U=l(T,"A",{href:!0});var b=n(U);W=f(b,Ya),b.forEach(i),T.forEach(i),D.forEach(i),J=h($),Y=l($,"LI",{class:!0});var V=n(Y);q=l(V,"DIV",{});var _=n(q);G=f(_,"Tanggal Hutang"),_.forEach(i),K=h(V),Q=l(V,"DIV",{});var w=n(Q);X=f(w,qa),w.forEach(i),V.forEach(i),Z=h($),aa=l($,"LI",{class:!0});var A=n(aa);ra=l(A,"DIV",{});var z=n(ra);ea=f(z,"Batas Waktu"),z.forEach(i),ta=h(A),sa=l(A,"DIV",{});var Ja=n(sa);oa=f(Ja,Ga),Ja.forEach(i),A.forEach(i),ca=h($),la=l($,"LI",{class:!0});var Qa=n(la);na=l(Qa,"DIV",{});var Za=n(na);fa=f(Za,"Total Piutang"),Za.forEach(i),ia=h(Qa),ha=l(Qa,"DIV",{});var ar=n(ha);da=f(ar,Ka),ar.forEach(i),Qa.forEach(i),va=h($),ma=l($,"LI",{class:!0});var rr=n(ma);ua=l(rr,"DIV",{});var er=n(ua);pa=f(er,"Sudah Dibayar"),er.forEach(i),Ea=h(rr),ga=l(rr,"DIV",{});var tr=n(ga);$a=f(tr,a[5]),tr.forEach(i),rr.forEach(i),$.forEach(i),u.forEach(i),Da=h(s),ya=l(s,"SECTION",{class:!0});var sr=n(ya);Ia=l(sr,"H1",{class:!0});var or=n(Ia);Ta=f(or,"Daftar Pembayaran"),or.forEach(i),ba=h(sr),Va=l(sr,"TABLE",{class:!0});var cr=n(Va);Ha=l(cr,"THEAD",{});var lr=n(Ha);ja=l(lr,"TR",{});var nr=n(ja);xa=l(nr,"TH",{});var fr=n(xa);_a=f(fr,"no."),fr.forEach(i),wa=h(nr),Aa=l(nr,"TH",{});var ir=n(Aa);Sa=f(ir,"admin"),ir.forEach(i),Ba=h(nr),La=l(nr,"TH",{});var hr=n(La);ka=f(hr,"tanggal"),hr.forEach(i),Fa=h(nr),Na=l(nr,"TH",{});var dr=n(Na);Oa=f(dr,"nominal"),dr.forEach(i),Pa=h(nr),Ma=l(nr,"TH",{});var vr=n(Ma);Ca=f(vr,"metode pembayaran"),vr.forEach(i),Ra=h(nr),Ua=l(nr,"TH",{}),n(Ua).forEach(i),nr.forEach(i),lr.forEach(i),Wa=h(cr),za=l(cr,"TBODY",{});var mr=n(za);for(let a=0;a<Xa.length;a+=1)Xa[a].l(mr);mr.forEach(i),cr.forEach(i),sr.forEach(i),s.forEach(i),this.h()},h(){v(c,"class","font-bold text-lg"),v(y,"class","flex-grow"),v(j,"href",_=`/app/ap/${a[0]}/add_payment`),v(j,"class","primary"),v(e,"class","header flex text-sm"),v(L,"class","svelte-11uoeo"),v(U,"href",z=`/app/customer/${a[4].id}/edit`),v(O,"class","svelte-11uoeo"),v(Y,"class","svelte-11uoeo"),v(aa,"class","svelte-11uoeo"),v(la,"class","svelte-11uoeo"),v(ma,"class","svelte-11uoeo"),v(B,"class","bg-white w-1/2 mr-4 card-detail svelte-11uoeo"),v(Ia,"class","p-4 font-bold"),v(Va,"class","jo-table"),v(ya,"class","bg-white"),v(r,"class","cont")},m(a,t){m(a,r,t),u(r,e),u(e,c),u(c,d),u(c,p),u(e,E),u(e,y),u(e,H),u(e,j),u(j,x),u(r,S),u(r,B),u(B,L),u(L,k),u(B,F),u(B,N),u(N,O),u(O,P),u(P,M),u(O,C),u(O,R),u(R,U),u(U,W),u(N,J),u(N,Y),u(Y,q),u(q,G),u(Y,K),u(Y,Q),u(Q,X),u(N,Z),u(N,aa),u(aa,ra),u(ra,ea),u(aa,ta),u(aa,sa),u(sa,oa),u(N,ca),u(N,la),u(la,na),u(na,fa),u(la,ia),u(la,ha),u(ha,da),u(N,va),u(N,ma),u(ma,ua),u(ua,pa),u(ma,Ea),u(ma,ga),u(ga,$a),u(r,Da),u(r,ya),u(ya,Ia),u(Ia,Ta),u(ya,ba),u(ya,Va),u(Va,Ha),u(Ha,ja),u(ja,xa),u(xa,_a),u(ja,wa),u(ja,Aa),u(Aa,Sa),u(ja,Ba),u(ja,La),u(La,ka),u(ja,Fa),u(ja,Na),u(Na,Oa),u(ja,Pa),u(ja,Ma),u(Ma,Ca),u(ja,Ra),u(ja,Ua),u(Va,Wa),u(Va,za);for(let a=0;a<Xa.length;a+=1)Xa[a].m(za,null);Ja=!0},p(a,[r]){if((!Ja||1&r)&&g(p,a[0]),(!Ja||1&r&&_!==(_=`/app/ap/${a[0]}/add_payment`))&&v(j,"href",_),(!Ja||16&r)&&Ya!==(Ya=a[4].first_name+"")&&g(W,Ya),(!Ja||16&r&&z!==(z=`/app/customer/${a[4].id}/edit`))&&v(U,"href",z),(!Ja||8&r)&&qa!==(qa=a[6](a[3].created_at)+"")&&g(X,qa),(!Ja||4&r)&&Ga!==(Ga=a[6](a[2].due_date)+"")&&g(oa,Ga),(!Ja||4&r)&&Ka!==(Ka=V(parseInt(a[2].total))+"")&&g(da,Ka),(!Ja||32&r)&&g($a,a[5]),66&r){let e;for(Qa=a[1],e=0;e<Qa.length;e+=1){const t=w(a,Qa,e);Xa[e]?(Xa[e].p(t,r),$(Xa[e],1)):(Xa[e]=A(t),Xa[e].c(),$(Xa[e],1),Xa[e].m(za,null))}for(b(),e=Qa.length;e<Xa.length;e+=1)Za(e);I()}},i(a){if(!Ja){for(let a=0;a<Qa.length;a+=1)$(Xa[a]);Ja=!0}},o(a){Xa=Xa.filter(Boolean);for(let a=0;a<Xa.length;a+=1)D(Xa[a]);Ja=!1},d(a){a&&i(r),T(Xa,a)}}}async function B(a){return a.params}function L(a,r,e){let t,{id:s}=r,o={},c={},l={},n=[],f={};return a.$$set=a=>{"id"in a&&e(0,s=a.id)},a.$$.update=()=>{2&a.$$.dirty&&e(5,t=V(n.map((a=>parseInt(a.nominal))).reduce(((a,r)=>a+r),0))),1&a.$$.dirty&&async function(a){const r=`/api/v1/ar/${a}`;try{const a=await H({url:r}),{order:t,payments:s,...i}=a,{user:h,transaction:d,...v}=t;e(3,c=v),e(1,n=s),e(2,o=i),e(4,l=h),f=d,e(2,o=i)}catch(a){console.log(a),alert("gagal mengambil data piutang")}}(s)},[s,n,o,c,l,t,function(a){return a?_(new Date(a),"dd MMMM',' yyyy"):""},a=>{a.id,console.log("deleting payment")}]}export default class extends a{constructor(a){super(),r(this,a,L,S,e,{id:0})}}export{B as preload};
