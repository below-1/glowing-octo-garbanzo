import{S as a,i as r,s as e,e as t,t as s,a as o,y as c,b as l,f as n,g as i,d as f,c as h,z as d,h as v,j as m,k as u,A as p,m as g,N as E,D,E as I,F as $,J as y,R as T,V as b}from"./client.36844de2.js";import{r as V}from"./rupiah.1a14ef94.js";import{g as _}from"./api.e630a648.js";import{F as w}from"./FaPencilAlt.537b2edc.js";import{F as j}from"./FaTrash.51c15d68.js";import{f as x}from"./index.77267d23.js";import"./IconBase.52240270.js";import"./index.48dff1b4.js";function H(a,r,e){const t=a.slice();return t[11]=r[e],t[13]=e,t}function P(a){let r,e,y,T,b,_,x,H,P,A,L,B,S,k,F,N,O,M,C,R,U,W,z,J,Y,q,G,K,Q,X,Z,aa,ra=a[13]+1+"",ea=a[11].user.first_name+"",ta=a[7](a[11].created_at)+"",sa=V(parseInt(a[11].nominal))+"",oa=a[11].mode+"";function ca(){return a[8](a[11])}return z=new w({}),K=new j({}),{c(){r=t("tr"),e=t("td"),y=s(ra),T=o(),b=t("td"),_=t("a"),x=s(ea),P=o(),A=t("td"),L=s(ta),B=o(),S=t("td"),k=s(sa),F=o(),N=t("td"),O=s(oa),M=o(),C=t("td"),R=t("div"),U=t("a"),W=t("div"),c(z.$$.fragment),Y=o(),q=t("button"),G=t("div"),c(K.$$.fragment),Q=o(),this.h()},l(a){r=l(a,"TR",{});var t=n(r);e=l(t,"TD",{});var s=n(e);y=i(s,ra),s.forEach(f),T=h(t),b=l(t,"TD",{});var o=n(b);_=l(o,"A",{href:!0,class:!0});var c=n(_);x=i(c,ea),c.forEach(f),o.forEach(f),P=h(t),A=l(t,"TD",{});var v=n(A);L=i(v,ta),v.forEach(f),B=h(t),S=l(t,"TD",{});var m=n(S);k=i(m,sa),m.forEach(f),F=h(t),N=l(t,"TD",{class:!0});var u=n(N);O=i(u,oa),u.forEach(f),M=h(t),C=l(t,"TD",{});var p=n(C);R=l(p,"DIV",{class:!0});var g=n(R);U=l(g,"A",{href:!0,class:!0});var E=n(U);W=l(E,"DIV",{class:!0});var D=n(W);d(z.$$.fragment,D),D.forEach(f),E.forEach(f),Y=h(g),q=l(g,"BUTTON",{class:!0});var I=n(q);G=l(I,"DIV",{class:!0});var $=n(G);d(K.$$.fragment,$),$.forEach(f),I.forEach(f),g.forEach(f),p.forEach(f),Q=h(t),t.forEach(f),this.h()},h(){v(_,"href",H=`/app/employee/${a[11].user.id}/edit`),v(_,"class","just-link"),v(N,"class","lowercase"),v(W,"class","w-3 h-3 text-blue-500"),v(U,"href",J=`/app/ar/payment/${a[11].id}/edit`),v(U,"class","appearance-none rounded-full p-1 mr-2 hover:bg-gray-300"),v(G,"class","w-3 h-3 text-red-500"),v(q,"class","appearance-none rounded-full p-1 hover:bg-gray-300 mr-2"),v(R,"class","flex items-center justify-end")},m(a,t){m(a,r,t),u(r,e),u(e,y),u(r,T),u(r,b),u(b,_),u(_,x),u(r,P),u(r,A),u(A,L),u(r,B),u(r,S),u(S,k),u(r,F),u(r,N),u(N,O),u(r,M),u(r,C),u(C,R),u(R,U),u(U,W),p(z,W,null),u(R,Y),u(R,q),u(q,G),p(K,G,null),u(r,Q),X=!0,Z||(aa=g(q,"click",ca),Z=!0)},p(r,e){a=r,(!X||2&e)&&ea!==(ea=a[11].user.first_name+"")&&E(x,ea),(!X||2&e&&H!==(H=`/app/employee/${a[11].user.id}/edit`))&&v(_,"href",H),(!X||2&e)&&ta!==(ta=a[7](a[11].created_at)+"")&&E(L,ta),(!X||2&e)&&sa!==(sa=V(parseInt(a[11].nominal))+"")&&E(k,sa),(!X||2&e)&&oa!==(oa=a[11].mode+"")&&E(O,oa),(!X||2&e&&J!==(J=`/app/ar/payment/${a[11].id}/edit`))&&v(U,"href",J)},i(a){X||(D(z.$$.fragment,a),D(K.$$.fragment,a),X=!0)},o(a){I(z.$$.fragment,a),I(K.$$.fragment,a),X=!1},d(a){a&&f(r),$(z),$(K),Z=!1,aa()}}}function A(a){let r,e,c,d,p,g,$,_,w,j,x,A,L,B,S,k,F,N,O,M,C,R,U,W,z,J,Y,q,G,K,Q,X,Z,aa,ra,ea,ta,sa,oa,ca,la,na,ia,fa,ha,da,va,ma,ua,pa,ga,Ea,Da,Ia,$a,ya,Ta,ba,Va,_a,wa,ja,xa,Ha,Pa,Aa,La,Ba,Sa,ka,Fa,Na,Oa,Ma,Ca,Ra,Ua,Wa,za,Ja,Ya,qa,Ga,Ka,Qa,Xa,Za,ar=a[4].first_name+"",rr=a[5].first_name+"",er=a[7](a[3].created_at)+"",tr=a[7](a[2].due_date)+"",sr=V(parseInt(a[2].total))+"",or=a[1],cr=[];for(let r=0;r<or.length;r+=1)cr[r]=P(H(a,or,r));const lr=a=>I(cr[a],1,1,(()=>{cr[a]=null}));return{c(){r=t("div"),e=t("section"),c=t("div"),d=s("piutang / detail piutang #"),p=s(a[0]),g=o(),$=t("div"),_=o(),w=t("a"),j=s("tambah pembayaran"),A=o(),L=t("section"),B=t("h1"),S=s("Detail Piutang"),k=o(),F=t("ul"),N=t("li"),O=t("div"),M=s("Pelanggan"),C=o(),R=t("div"),U=t("a"),W=s(ar),J=o(),Y=t("li"),q=t("div"),G=s("Pegawai"),K=o(),Q=t("div"),X=s(rr),Z=o(),aa=t("li"),ra=t("div"),ea=s("Tanggal Hutang"),ta=o(),sa=t("div"),oa=s(er),ca=o(),la=t("li"),na=t("div"),ia=s("Batas Waktu"),fa=o(),ha=t("div"),da=s(tr),va=o(),ma=t("li"),ua=t("div"),pa=s("Total Piutang"),ga=o(),Ea=t("div"),Da=s(sr),Ia=o(),$a=t("li"),ya=t("div"),Ta=s("Sudah Dibayar"),ba=o(),Va=t("div"),_a=s(a[6]),wa=o(),ja=t("section"),xa=t("h1"),Ha=s("Daftar Pembayaran"),Pa=o(),Aa=t("table"),La=t("thead"),Ba=t("tr"),Sa=t("th"),ka=s("no."),Fa=o(),Na=t("th"),Oa=s("admin"),Ma=o(),Ca=t("th"),Ra=s("tanggal"),Ua=o(),Wa=t("th"),za=s("nominal"),Ja=o(),Ya=t("th"),qa=s("metode pembayaran"),Ga=o(),Ka=t("th"),Qa=o(),Xa=t("tbody");for(let a=0;a<cr.length;a+=1)cr[a].c();this.h()},l(t){r=l(t,"DIV",{class:!0});var s=n(r);e=l(s,"SECTION",{class:!0});var o=n(e);c=l(o,"DIV",{class:!0});var v=n(c);d=i(v,"piutang / detail piutang #"),p=i(v,a[0]),v.forEach(f),g=h(o),$=l(o,"DIV",{class:!0}),n($).forEach(f),_=h(o),w=l(o,"A",{href:!0,class:!0});var m=n(w);j=i(m,"tambah pembayaran"),m.forEach(f),o.forEach(f),A=h(s),L=l(s,"SECTION",{class:!0});var u=n(L);B=l(u,"H1",{class:!0});var E=n(B);S=i(E,"Detail Piutang"),E.forEach(f),k=h(u),F=l(u,"UL",{});var D=n(F);N=l(D,"LI",{class:!0});var I=n(N);O=l(I,"DIV",{});var y=n(O);M=i(y,"Pelanggan"),y.forEach(f),C=h(I),R=l(I,"DIV",{});var T=n(R);U=l(T,"A",{href:!0});var b=n(U);W=i(b,ar),b.forEach(f),T.forEach(f),I.forEach(f),J=h(D),Y=l(D,"LI",{class:!0});var V=n(Y);q=l(V,"DIV",{});var x=n(q);G=i(x,"Pegawai"),x.forEach(f),K=h(V),Q=l(V,"DIV",{});var H=n(Q);X=i(H,rr),H.forEach(f),V.forEach(f),Z=h(D),aa=l(D,"LI",{class:!0});var P=n(aa);ra=l(P,"DIV",{});var z=n(ra);ea=i(z,"Tanggal Hutang"),z.forEach(f),ta=h(P),sa=l(P,"DIV",{});var Za=n(sa);oa=i(Za,er),Za.forEach(f),P.forEach(f),ca=h(D),la=l(D,"LI",{class:!0});var or=n(la);na=l(or,"DIV",{});var lr=n(na);ia=i(lr,"Batas Waktu"),lr.forEach(f),fa=h(or),ha=l(or,"DIV",{});var nr=n(ha);da=i(nr,tr),nr.forEach(f),or.forEach(f),va=h(D),ma=l(D,"LI",{class:!0});var ir=n(ma);ua=l(ir,"DIV",{});var fr=n(ua);pa=i(fr,"Total Piutang"),fr.forEach(f),ga=h(ir),Ea=l(ir,"DIV",{});var hr=n(Ea);Da=i(hr,sr),hr.forEach(f),ir.forEach(f),Ia=h(D),$a=l(D,"LI",{class:!0});var dr=n($a);ya=l(dr,"DIV",{});var vr=n(ya);Ta=i(vr,"Sudah Dibayar"),vr.forEach(f),ba=h(dr),Va=l(dr,"DIV",{});var mr=n(Va);_a=i(mr,a[6]),mr.forEach(f),dr.forEach(f),D.forEach(f),u.forEach(f),wa=h(s),ja=l(s,"SECTION",{class:!0});var ur=n(ja);xa=l(ur,"H1",{class:!0});var pr=n(xa);Ha=i(pr,"Daftar Pembayaran"),pr.forEach(f),Pa=h(ur),Aa=l(ur,"TABLE",{class:!0});var gr=n(Aa);La=l(gr,"THEAD",{});var Er=n(La);Ba=l(Er,"TR",{});var Dr=n(Ba);Sa=l(Dr,"TH",{});var Ir=n(Sa);ka=i(Ir,"no."),Ir.forEach(f),Fa=h(Dr),Na=l(Dr,"TH",{});var $r=n(Na);Oa=i($r,"admin"),$r.forEach(f),Ma=h(Dr),Ca=l(Dr,"TH",{});var yr=n(Ca);Ra=i(yr,"tanggal"),yr.forEach(f),Ua=h(Dr),Wa=l(Dr,"TH",{});var Tr=n(Wa);za=i(Tr,"nominal"),Tr.forEach(f),Ja=h(Dr),Ya=l(Dr,"TH",{});var br=n(Ya);qa=i(br,"metode pembayaran"),br.forEach(f),Ga=h(Dr),Ka=l(Dr,"TH",{}),n(Ka).forEach(f),Dr.forEach(f),Er.forEach(f),Qa=h(gr),Xa=l(gr,"TBODY",{});var Vr=n(Xa);for(let a=0;a<cr.length;a+=1)cr[a].l(Vr);Vr.forEach(f),gr.forEach(f),ur.forEach(f),s.forEach(f),this.h()},h(){v(c,"class","font-bold text-lg"),v($,"class","flex-grow"),v(w,"href",x=`/app/ar/${a[0]}/add_payment`),v(w,"class","primary"),v(e,"class","header flex text-sm"),v(B,"class","svelte-11uoeo"),v(U,"href",z=`/app/customer/${a[4].id}/edit`),v(N,"class","svelte-11uoeo"),v(Y,"class","svelte-11uoeo"),v(aa,"class","svelte-11uoeo"),v(la,"class","svelte-11uoeo"),v(ma,"class","svelte-11uoeo"),v($a,"class","svelte-11uoeo"),v(L,"class","bg-white w-1/2 mr-4 card-detail svelte-11uoeo"),v(xa,"class","p-4 font-bold"),v(Aa,"class","jo-table"),v(ja,"class","bg-white"),v(r,"class","cont")},m(a,t){m(a,r,t),u(r,e),u(e,c),u(c,d),u(c,p),u(e,g),u(e,$),u(e,_),u(e,w),u(w,j),u(r,A),u(r,L),u(L,B),u(B,S),u(L,k),u(L,F),u(F,N),u(N,O),u(O,M),u(N,C),u(N,R),u(R,U),u(U,W),u(F,J),u(F,Y),u(Y,q),u(q,G),u(Y,K),u(Y,Q),u(Q,X),u(F,Z),u(F,aa),u(aa,ra),u(ra,ea),u(aa,ta),u(aa,sa),u(sa,oa),u(F,ca),u(F,la),u(la,na),u(na,ia),u(la,fa),u(la,ha),u(ha,da),u(F,va),u(F,ma),u(ma,ua),u(ua,pa),u(ma,ga),u(ma,Ea),u(Ea,Da),u(F,Ia),u(F,$a),u($a,ya),u(ya,Ta),u($a,ba),u($a,Va),u(Va,_a),u(r,wa),u(r,ja),u(ja,xa),u(xa,Ha),u(ja,Pa),u(ja,Aa),u(Aa,La),u(La,Ba),u(Ba,Sa),u(Sa,ka),u(Ba,Fa),u(Ba,Na),u(Na,Oa),u(Ba,Ma),u(Ba,Ca),u(Ca,Ra),u(Ba,Ua),u(Ba,Wa),u(Wa,za),u(Ba,Ja),u(Ba,Ya),u(Ya,qa),u(Ba,Ga),u(Ba,Ka),u(Aa,Qa),u(Aa,Xa);for(let a=0;a<cr.length;a+=1)cr[a].m(Xa,null);Za=!0},p(a,[r]){if((!Za||1&r)&&E(p,a[0]),(!Za||1&r&&x!==(x=`/app/ar/${a[0]}/add_payment`))&&v(w,"href",x),(!Za||16&r)&&ar!==(ar=a[4].first_name+"")&&E(W,ar),(!Za||16&r&&z!==(z=`/app/customer/${a[4].id}/edit`))&&v(U,"href",z),(!Za||32&r)&&rr!==(rr=a[5].first_name+"")&&E(X,rr),(!Za||8&r)&&er!==(er=a[7](a[3].created_at)+"")&&E(oa,er),(!Za||4&r)&&tr!==(tr=a[7](a[2].due_date)+"")&&E(da,tr),(!Za||4&r)&&sr!==(sr=V(parseInt(a[2].total))+"")&&E(Da,sr),(!Za||64&r)&&E(_a,a[6]),130&r){let e;for(or=a[1],e=0;e<or.length;e+=1){const t=H(a,or,e);cr[e]?(cr[e].p(t,r),D(cr[e],1)):(cr[e]=P(t),cr[e].c(),D(cr[e],1),cr[e].m(Xa,null))}for(b(),e=or.length;e<cr.length;e+=1)lr(e);y()}},i(a){if(!Za){for(let a=0;a<or.length;a+=1)D(cr[a]);Za=!0}},o(a){cr=cr.filter(Boolean);for(let a=0;a<cr.length;a+=1)I(cr[a]);Za=!1},d(a){a&&f(r),T(cr,a)}}}async function L(a){return a.params}function B(a,r,e){let t,{id:s}=r,o={},c={},l={},n={},i=[],f={};return a.$$set=a=>{"id"in a&&e(0,s=a.id)},a.$$.update=()=>{2&a.$$.dirty&&e(6,t=V(i.map((a=>parseInt(a.nominal))).reduce(((a,r)=>a+r),0))),1&a.$$.dirty&&async function(a){const r=`/api/v1/ar/${a}`;try{const a=await _({url:r}),{admin:t,order:s,payments:h,...d}=a,{user:v,transaction:m,...u}=s;e(5,n=t),e(3,c=u),e(1,i=h),e(2,o=d),e(4,l=v),f=m,e(2,o=d)}catch(a){console.log(a),alert("gagal mengambil data piutang")}}(s)},[s,i,o,c,l,n,t,function(a){return a?x(new Date(a),"dd MMMM',' yyyy"):""},a=>{a.id,console.log("deleting payment")}]}export default class extends a{constructor(a){super(),r(this,a,B,A,e,{id:0})}}export{L as preload};
