import{S as a,i as s,s as e,e as t,t as l,a as i,b as r,f as n,g as c,d as o,c as d,h as u,j as h,k as f,l as m,m as p,n as b,r as v,o as x}from"./client.36844de2.js";import{g,a as y}from"./api.e630a648.js";import{f as w}from"./index.66705cc8.js";function E(a){let s,e;return{c(){s=t("small"),e=l("nama harus diisi"),this.h()},l(a){s=r(a,"SMALL",{class:!0});var t=n(s);e=c(t,"nama harus diisi"),t.forEach(o),this.h()},h(){u(s,"class","text-red-500 text-xs")},m(a,t){h(a,s,t),f(s,e)},d(a){a&&o(s)}}}function $(a){let s,e,x,g,y,w,$,j,I,D,V,L,N,k,q,T,A,B,S=a[1].fields.name.errors.includes("required"),U=S&&E();return{c(){s=t("div"),e=t("div"),x=t("div"),g=l("input jenis beban usaha"),y=i(),w=t("div"),$=t("label"),j=l("Nama"),I=i(),D=t("div"),V=t("input"),L=i(),U&&U.c(),N=i(),k=t("button"),q=l("simpan"),this.h()},l(a){s=r(a,"DIV",{class:!0});var t=n(s);e=r(t,"DIV",{class:!0});var l=n(e);x=r(l,"DIV",{class:!0});var i=n(x);g=c(i,"input jenis beban usaha"),i.forEach(o),y=d(l),w=r(l,"DIV",{class:!0});var u=n(w);$=r(u,"LABEL",{});var h=n($);j=c(h,"Nama"),h.forEach(o),I=d(u),D=r(u,"DIV",{class:!0});var f=n(D);V=r(f,"INPUT",{class:!0}),L=d(f),U&&U.l(f),f.forEach(o),u.forEach(o),N=d(l),k=r(l,"BUTTON",{disabled:!0,class:!0});var m=n(k);q=c(m,"simpan"),m.forEach(o),l.forEach(o),t.forEach(o),this.h()},h(){u(x,"class","font-semibold text-gray-600 text-xl mb-4"),u(V,"class","border border-gray-300 rounded px-2 py-1"),u(D,"class","flex flex-col"),u(w,"class","flex flex-col mb-4  "),k.disabled=T=!a[1].valid,u(k,"class","px-6 py-1 bg-blue-600 text-white font-bold rounded shadow disabled:opacity-50"),u(e,"class","w-1/3 p-4 rounded bg-white text-sm"),u(s,"class","flex items-center justify-center flex-grow")},m(t,l){h(t,s,l),f(s,e),f(e,x),f(x,g),f(e,y),f(e,w),f(w,$),f($,j),f(w,I),f(w,D),f(D,V),m(V,a[0]),f(D,L),U&&U.m(D,null),f(e,N),f(e,k),f(k,q),A||(B=[p(V,"input",a[5]),p(k,"click",a[3])],A=!0)},p(a,[s]){1&s&&V.value!==a[0]&&m(V,a[0]),2&s&&(S=a[1].fields.name.errors.includes("required")),S?U||(U=E(),U.c(),U.m(D,null)):U&&(U.d(1),U=null),2&s&&T!==(T=!a[1].valid)&&(k.disabled=T)},i:b,o:b,d(a){a&&o(s),U&&U.d(),A=!1,v(B)}}}async function j(a){return a.params}function I(a,s,e){let t,{id:l}=s,i="";const r=w((()=>({name:{value:i,validators:["required"]}})));return x(a,r,(a=>e(1,t=a))),a.$$set=a=>{"id"in a&&e(4,l=a.id)},a.$$.update=()=>{16&a.$$.dirty&&async function(a){if(!a)return;const s=`/api/v1/optype/${a}`;try{const a=await g({url:s});e(0,i=a.name)}catch(a){console.log(a),alert("gagal mengambil data beban usaha")}}(l)},[i,t,r,async function(){const a=`/api/v1/optype/${l}`;try{const s=await y({url:a,payload:{name:i}});window.history.back(),console.log(s)}catch(a){console.log(a),alert("gagal mengubah data beban usaha")}},l,function(){i=this.value,e(0,i)}]}export default class extends a{constructor(a){super(),s(this,a,I,$,e,{id:4})}}export{j as preload};
