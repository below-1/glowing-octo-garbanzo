import{S as a,i as s,s as e,e as t,t as r,a as l,y as o,b as i,f as c,g as n,d,c as u,z as f,h as p,j as m,k as h,l as b,A as v,m as g,D as E,E as x,F as y,r as $,o as I,U as w}from"./client.36844de2.js";import{g as L,a as k}from"./api.e630a648.js";import{M as A}from"./MultiSelect.ee803a52.js";import{f as j}from"./index.66705cc8.js";import"./IconBase.52240270.js";import"./popper.392db775.js";function T(a){let s,e;return{c(){s=t("small"),e=r("nama harus diisi"),this.h()},l(a){s=i(a,"SMALL",{class:!0});var t=c(s);e=n(t,"nama harus diisi"),t.forEach(d),this.h()},h(){p(s,"class","text-red-500 text-xs")},m(a,t){m(a,s,t),h(s,e)},d(a){a&&d(s)}}}function D(a){let s,e,I,w,L,k,j,D,V,N,S,P,U,q,M,K,R,X,z,F,O,_,C,G,H,J,Q,W,Y,Z,aa,sa,ea,ta,ra,la,oa,ia,ca,na,da,ua,fa=a[6].fields.title.errors.includes("required"),pa=fa&&T();return C=new A({props:{options:a[4].map(B),selected:a[5],label:"pilih kategori"}}),C.$on("select",a[12]),C.$on("remove",a[13]),{c(){s=t("div"),e=t("div"),I=t("div"),w=r("ubah data produk"),L=l(),k=t("div"),j=t("label"),D=r("Nama"),V=l(),N=t("input"),S=l(),pa&&pa.c(),P=l(),U=t("div"),q=t("label"),M=r("Satuan"),K=l(),R=t("input"),X=l(),z=t("div"),F=t("label"),O=r("Kategori"),_=l(),o(C.$$.fragment),G=l(),H=t("div"),J=t("label"),Q=r("Penjelasan"),W=l(),Y=t("textarea"),Z=l(),aa=t("div"),sa=t("label"),ea=r("Info Tambahan"),ta=l(),ra=t("textarea"),la=l(),oa=t("button"),ia=r("simpan"),this.h()},l(a){s=i(a,"DIV",{class:!0});var t=c(s);e=i(t,"DIV",{class:!0});var r=c(e);I=i(r,"DIV",{class:!0});var l=c(I);w=n(l,"ubah data produk"),l.forEach(d),L=u(r),k=i(r,"DIV",{class:!0});var o=c(k);j=i(o,"LABEL",{});var p=c(j);D=n(p,"Nama"),p.forEach(d),V=u(o),N=i(o,"INPUT",{class:!0}),S=u(o),pa&&pa.l(o),o.forEach(d),P=u(r),U=i(r,"DIV",{class:!0});var m=c(U);q=i(m,"LABEL",{});var h=c(q);M=n(h,"Satuan"),h.forEach(d),K=u(m),R=i(m,"INPUT",{class:!0}),m.forEach(d),X=u(r),z=i(r,"DIV",{class:!0});var b=c(z);F=i(b,"LABEL",{});var v=c(F);O=n(v,"Kategori"),v.forEach(d),_=u(b),f(C.$$.fragment,b),b.forEach(d),G=u(r),H=i(r,"DIV",{class:!0});var g=c(H);J=i(g,"LABEL",{});var E=c(J);Q=n(E,"Penjelasan"),E.forEach(d),W=u(g),Y=i(g,"TEXTAREA",{class:!0}),c(Y).forEach(d),g.forEach(d),Z=u(r),aa=i(r,"DIV",{class:!0});var x=c(aa);sa=i(x,"LABEL",{});var y=c(sa);ea=n(y,"Info Tambahan"),y.forEach(d),ta=u(x),ra=i(x,"TEXTAREA",{class:!0}),c(ra).forEach(d),x.forEach(d),la=u(r),oa=i(r,"BUTTON",{disabled:!0,class:!0});var $=c(oa);ia=n($,"simpan"),$.forEach(d),r.forEach(d),t.forEach(d),this.h()},h(){p(I,"class","font-bold text-xl mb-3"),p(N,"class","border border-gray-300 rounded p-2"),p(k,"class","flex flex-col mb-3"),p(R,"class","border border-gray-300 rounded p-2"),p(U,"class","flex flex-col mb-3"),p(z,"class","flex flex-col mb-3"),p(Y,"class","border border-gray-300 rounded p-2"),p(H,"class","flex flex-col mb-3"),p(ra,"class","border border-gray-300 rounded p-2"),p(aa,"class","flex flex-col mb-3"),oa.disabled=ca=!a[6].valid,p(oa,"class","px-6 py-1 bg-blue-600 text-white font-bold rounded shadow disabled:opacity-50"),p(e,"class","w-1/3 p-4 rounded bg-white text-sm"),p(s,"class","flex items-center justify-center flex-grow")},m(t,r){m(t,s,r),h(s,e),h(e,I),h(I,w),h(e,L),h(e,k),h(k,j),h(j,D),h(k,V),h(k,N),b(N,a[0]),h(k,S),pa&&pa.m(k,null),h(e,P),h(e,U),h(U,q),h(q,M),h(U,K),h(U,R),b(R,a[2]),h(e,X),h(e,z),h(z,F),h(F,O),h(z,_),v(C,z,null),h(e,G),h(e,H),h(H,J),h(J,Q),h(H,W),h(H,Y),b(Y,a[1]),h(e,Z),h(e,aa),h(aa,sa),h(sa,ea),h(aa,ta),h(aa,ra),b(ra,a[3]),h(e,la),h(e,oa),h(oa,ia),na=!0,da||(ua=[g(N,"input",a[10]),g(R,"input",a[11]),g(Y,"input",a[14]),g(ra,"input",a[15]),g(oa,"click",a[8])],da=!0)},p(a,[s]){1&s&&N.value!==a[0]&&b(N,a[0]),64&s&&(fa=a[6].fields.title.errors.includes("required")),fa?pa||(pa=T(),pa.c(),pa.m(k,null)):pa&&(pa.d(1),pa=null),4&s&&R.value!==a[2]&&b(R,a[2]);const e={};16&s&&(e.options=a[4].map(B)),32&s&&(e.selected=a[5]),C.$set(e),2&s&&b(Y,a[1]),8&s&&b(ra,a[3]),(!na||64&s&&ca!==(ca=!a[6].valid))&&(oa.disabled=ca)},i(a){na||(E(C.$$.fragment,a),na=!0)},o(a){x(C.$$.fragment,a),na=!1},d(a){a&&d(s),pa&&pa.d(),y(C),da=!1,$(ua)}}}async function V(a){return a.params}const B=a=>({label:a.title,value:a.id});function N(a,s,e){let t,{id:r}=s,l="",o="",i="",c="",n=[],d=[],u=j((()=>({title:{value:l,validators:["required"]}})));I(a,u,(a=>e(6,t=a))),w((async()=>{await async function(){try{e(4,n=await L({url:"/api/v1/category"}))}catch(a){console.log(a),alert("gagal memuat data kategori")}}()}));return a.$$set=a=>{"id"in a&&e(9,r=a.id)},a.$$.update=()=>{512&a.$$.dirty&&async function({id:a}){if(!a)return;const s=`/api/v1/product/${a}`;try{const a=await L({url:s});e(0,l=a.title),e(1,o=a.summary),e(3,c=a.content),e(2,i=a.unit),e(5,d=a.categories.map((a=>a.id)))}catch(a){console.log(a),alert("gagal mengambil data produk")}}({id:r})},[l,o,i,c,n,d,t,u,async function(){const a={title:l,summary:o,content:c,unit:i,selected_categories:d},s=`/api/v1/product/${r}`;try{const e=await k({url:s,payload:a});console.log(e),alert("sukses mengubah data produk"),window.history.back()}catch(a){console.log(a),alert("gagal mengubah data produk")}},r,function(){l=this.value,e(0,l)},function(){i=this.value,e(2,i)},a=>{d.push(a.detail),e(5,d=[...d])},a=>{e(5,d=d.filter((s=>s!=a.detail)))},function(){o=this.value,e(1,o)},function(){c=this.value,e(3,c)}]}export default class extends a{constructor(a){super(),s(this,a,N,D,e,{id:9})}}export{V as preload};
