import{w as e,p as t,u as i}from"./client.36844de2.js";function n(e,t){const i=parseFloat(t[0]);return(isNaN(e)?e.length:parseFloat(e))>=i}function l(e,t){const i=parseFloat(t[0]),n=isNaN(e)?e.length:parseFloat(e);return!!isNaN(n)||n<=i}var r=Object.freeze({__proto__:null,between:function(e,t){return n(e,[t[0]])&&l(e,[t[1]])},email:function(e,t){return Boolean(e)&&/^[a-zA-Z0-9_+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,7}$/.test(e)},max:l,min:n,required:function(e,t){if(null==e)return!1;if("string"==typeof e){return e.replace(/\s/g,"").length>0}return!0},url:function(e,t){return/(https?|ftp|git|svn):\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},equal:function(e,t){return e===t[0]}});function s(e){return e.value}function a(e,t,{stopAtFirstFieldError:i}){const{name:n,value:l,validators:s=[],enabled:a=!0}=e;let d=!0,o=!1,u=[];return a&&s.some((e=>{const[s,a,c]=function(e,t,i,n,l=!0){let s,a=!0,d=!1;if(!1===l)return[a,s,d];if("function"==typeof i){const l=i.call(null,t);l.then?(d=!0,l.then((({name:t,valid:i})=>{n.update((n=>(n.fields[e]=n.fields[e]||{errors:[]},n.fields[e].pending=!1,n.fields[e].valid=i,i||n.fields[e].errors.push(t),n.valid=!Object.keys(n.fields).find((e=>!n.fields[e].valid)),n)))}))):(a=l.valid,s=l.name)}else{const e=i.split(/:/g);s=e.shift(),a=r[s].call(null,t,e)}return[a,s,d]}(n,l,e,t);if(!o&&c&&(d=!1,o=!0),!s)return d=!1,u=[...u,a],i})),{data:e,valid:d,errors:u,pending:o}}function d(i,n={}){const l=i.call();let r=Object.fromEntries(Object.keys(l).map((e=>[e,{name:l[e].name||e,value:l[e].value}])));n=Object.assign({initCheck:!0,validateOnChange:!0,stopAtFirstError:!1,stopAtFirstFieldError:!0},n);const s=e({fields:{},oldFields:{},dirty:!1,valid:!0,initCheck:n.initCheck}),{subscribe:a,set:d,update:u}=s;return n.validateOnChange&&t((()=>o(i,s,r,n))),n.initCheck&&o(i,s,r,n),{subscribe:a,set:d,update:u,validate(){o(i,s,r,n)},reset(){const e=i.call();r=Object.fromEntries(Object.keys(e).map((t=>[t,{name:e[t].name||t,value:e[t].value}]))),o(i,s,r,n)}}}function o(e,t,n,l){const r=e.call(),d=i(t),o={fields:{},oldFields:{},dirty:!1,initCheck:l.initCheck};Object.keys(r).some((e=>{const i={name:e,...r[e]},u=d.fields[e]||{data:{},errors:[],pending:!1,valid:!0,enabled:!0,dirty:!1},c=n[e],f=s(i),p=s(u),v=i.enabled;if(v===u.enabled&&f&&f===p?(o.fields[e]=d.fields[e],v||(o.fields[e].valid=!0,o.fields[e].errors=[])):o.fields[e]=a(i,t,l),f!==c.value&&(o.dirty=!0),o.fields[e].dirty=f!==c.value,o.oldFields[e]=Object.assign({},u),l.stopAtFirstError)return!o.fields[e].valid})),o.valid=!Object.keys(o.fields).find((e=>!o.fields[e].valid)),t.set(o)}export{d as f};
