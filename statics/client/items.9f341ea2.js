import{S as a,i as s,s as t,e as r,b as e,f as l,d as o,h as c,L as n,j as i,k as h,m as f,a5 as u,Q as d,D as p,W as v,O as m,E as b,I as E,V as g,J as T,K as y,t as x,a as $,g as w,c as D,N as k,y as I,z as j,A as H,R as B,F as N,U as V,_ as R,a3 as O,a4 as U,a0 as J,l as q,r as A}from"./client.36844de2.js";import{r as L}from"./rupiah.1a14ef94.js";import{a as S,g as _}from"./api.e630a648.js";import{f as z}from"./index.b02b635e.js";function C(a){let s,t,E,g,T,x;const $=a[2].default,w=y($,a,a[1],null);return{c(){s=r("div"),t=r("div"),w&&w.c(),this.h()},l(a){s=e(a,"DIV",{class:!0,style:!0});var r=l(s);t=e(r,"DIV",{class:!0});var c=l(t);w&&w.l(c),c.forEach(o),r.forEach(o),this.h()},h(){c(t,"class","bg-white rounded shadow-xl"),c(s,"class","fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center"),n(s,"z-index","100"),n(s,"background","rgb(250, 250, 250, 0.8)")},m(r,e){i(r,s,e),h(s,t),w&&w.m(t,null),g=!0,T||(x=f(s,"click",u(a[3])),T=!0)},p(a,s){w&&w.p&&2&s&&d(w,$,a,a[1],s,null,null)},i(a){g||(p(w,a),v((()=>{E||(E=m(s,z,{},!0)),E.run(1)})),g=!0)},o(a){b(w,a),E||(E=m(s,z,{},!1)),E.run(0),g=!1},d(a){a&&o(s),w&&w.d(a),a&&E&&E.end(),T=!1,x()}}}function F(a){let s,t,r=a[0]&&C(a);return{c(){r&&r.c(),s=E()},l(a){r&&r.l(a),s=E()},m(a,e){r&&r.m(a,e),i(a,s,e),t=!0},p(a,[t]){a[0]?r?(r.p(a,t),1&t&&p(r,1)):(r=C(a),r.c(),p(r,1),r.m(s.parentNode,s)):r&&(g(),b(r,1,1,(()=>{r=null})),T())},i(a){t||(p(r),t=!0)},o(a){b(r),t=!1},d(a){r&&r.d(a),a&&o(s)}}}function K(a,s,t){let{$$slots:r={},$$scope:e}=s,{show:l=!1}=s;return a.$$set=a=>{"show"in a&&t(0,l=a.show),"$$scope"in a&&t(1,e=a.$$scope)},[l,e,r,()=>{t(0,l=!1)}]}class P extends a{constructor(a){super(),s(this,a,K,F,t,{show:0})}}function Q(a,s,t){const r=a.slice();return r[12]=s[t],r[14]=t,r}function W(a){let s,t,n,u,d,p,v,m,b,E,g,T,y,I,j,H,B,N,V,R,O,U,J,q,A,S,_,z,C=a[14]+1+"",F=L(parseInt(a[12].price))+"",K=L(parseInt(a[12].sale_price))+"",P=(a[12].quantity?a[12].quantity:"-")+"",Q=(a[12].available?a[12].available:"-")+"",W=(a[12].sold?a[12].sold:"-")+"",Y=(a[12].defective?a[12].defective:"-")+"";function G(){return a[7](a[12])}return{c(){s=r("tr"),t=r("td"),n=x(C),u=$(),d=r("td"),p=x(F),v=$(),m=r("td"),b=x(K),E=$(),g=r("td"),T=x(P),y=$(),I=r("td"),j=x(Q),H=$(),B=r("td"),N=x(W),V=$(),R=r("td"),O=x(Y),U=$(),J=r("td"),q=r("button"),A=x("ubah jumlah rusak"),S=$(),this.h()},l(a){s=e(a,"TR",{});var r=l(s);t=e(r,"TD",{});var c=l(t);n=w(c,C),c.forEach(o),u=D(r),d=e(r,"TD",{});var i=l(d);p=w(i,F),i.forEach(o),v=D(r),m=e(r,"TD",{});var h=l(m);b=w(h,K),h.forEach(o),E=D(r),g=e(r,"TD",{});var f=l(g);T=w(f,P),f.forEach(o),y=D(r),I=e(r,"TD",{});var x=l(I);j=w(x,Q),x.forEach(o),H=D(r),B=e(r,"TD",{});var $=l(B);N=w($,W),$.forEach(o),V=D(r),R=e(r,"TD",{});var k=l(R);O=w(k,Y),k.forEach(o),U=D(r),J=e(r,"TD",{class:!0});var L=l(J);q=e(L,"BUTTON",{class:!0});var _=l(q);A=w(_,"ubah jumlah rusak"),_.forEach(o),L.forEach(o),S=D(r),r.forEach(o),this.h()},h(){c(q,"class","bg-indigo-600 text-white font-bold px-3 py-1"),c(J,"class","text-right")},m(a,r){i(a,s,r),h(s,t),h(t,n),h(s,u),h(s,d),h(d,p),h(s,v),h(s,m),h(m,b),h(s,E),h(s,g),h(g,T),h(s,y),h(s,I),h(I,j),h(s,H),h(s,B),h(B,N),h(s,V),h(s,R),h(R,O),h(s,U),h(s,J),h(J,q),h(q,A),h(s,S),_||(z=f(q,"click",G),_=!0)},p(s,t){a=s,4&t&&F!==(F=L(parseInt(a[12].price))+"")&&k(p,F),4&t&&K!==(K=L(parseInt(a[12].sale_price))+"")&&k(b,K),4&t&&P!==(P=(a[12].quantity?a[12].quantity:"-")+"")&&k(T,P),4&t&&Q!==(Q=(a[12].available?a[12].available:"-")+"")&&k(j,Q),4&t&&W!==(W=(a[12].sold?a[12].sold:"-")+"")&&k(N,W),4&t&&Y!==(Y=(a[12].defective?a[12].defective:"-")+"")&&k(O,Y)},d(a){a&&o(s),_=!1,z()}}}function Y(a){let s,t,n,u,d,p,v,m,b,E,g,T,y,k,I,j,H;return{c(){s=r("div"),t=r("h2"),n=x("Ubah Jumlah Barang Rusak"),u=$(),d=r("div"),p=r("div"),v=r("label"),m=x("Jumlah Barang Rusak"),b=$(),E=r("input"),T=$(),y=r("button"),k=x("simpan"),this.h()},l(a){s=e(a,"DIV",{});var r=l(s);t=e(r,"H2",{class:!0});var c=l(t);n=w(c,"Ubah Jumlah Barang Rusak"),c.forEach(o),u=D(r),d=e(r,"DIV",{class:!0});var i=l(d);p=e(i,"DIV",{class:!0});var h=l(p);v=e(h,"LABEL",{class:!0});var f=l(v);m=w(f,"Jumlah Barang Rusak"),f.forEach(o),b=D(h),E=e(h,"INPUT",{type:!0,max:!0,min:!0,class:!0}),h.forEach(o),T=D(i),y=e(i,"BUTTON",{":disabled":!0,class:!0});var g=l(y);k=w(g,"simpan"),g.forEach(o),i.forEach(o),r.forEach(o),this.h()},h(){c(t,"class","font-bold text-lg p-4 border-bottom-1 border-gray-300"),c(v,"class","text-sm"),c(E,"type","number"),c(E,"max",g=a[4].available),c(E,"min","0"),c(E,"class","w-full border border-gray-300 rounded px-2 py-1"),c(p,"class","flex flex-col justify-center mb-4"),c(y,":disabled",I=0==a[5]),c(y,"class","bg-blue-600 text-white font-bold px-3 py-1 disabled:opacity-50"),c(d,"class","p-4")},m(r,e){i(r,s,e),h(s,t),h(t,n),h(s,u),h(s,d),h(d,p),h(p,v),h(v,m),h(p,b),h(p,E),q(E,a[5]),h(d,T),h(d,y),h(y,k),j||(H=[f(E,"input",a[8]),f(y,"click",a[6])],j=!0)},p(a,s){16&s&&g!==(g=a[4].available)&&c(E,"max",g),32&s&&J(E.value)!==a[5]&&q(E,a[5]),32&s&&I!==(I=0==a[5])&&c(y,":disabled",I)},d(a){a&&o(s),j=!1,A(H)}}}function G(a){let s,t,n,f,u,d,v,m,E,g,T,y,V,J,q,A,L,S,_,z,C,F,K,G,M,X,Z,aa,sa,ta,ra,ea,la,oa,ca,na,ia,ha,fa,ua,da,pa,va,ma,ba,Ea,ga,Ta,ya=a[1].title+"",xa=a[2],$a=[];for(let s=0;s<xa.length;s+=1)$a[s]=W(Q(a,xa,s));function wa(s){a[9](s)}let Da={$$slots:{default:[Y]},$$scope:{ctx:a}};return void 0!==a[3]&&(Da.show=a[3]),Ea=new P({props:Da}),R.push((()=>O(Ea,"show",wa))),{c(){s=r("div"),t=r("section"),n=r("div"),f=x("history pembelian / produk #"),u=x(a[0]),d=x(" -- "),v=x(ya),m=$(),E=r("div"),g=$(),T=r("section"),y=r("table"),V=r("thead"),J=r("tr"),q=r("th"),A=x("no."),L=$(),S=r("th"),_=x("harga beli"),z=$(),C=r("th"),F=x("harga jual"),K=$(),G=r("th"),M=x("stok"),X=$(),Z=r("th"),aa=$(),sa=r("tr"),ta=r("th"),ra=x("awal"),ea=$(),la=r("th"),oa=x("tersedia"),ca=$(),na=r("th"),ia=x("terjual"),ha=$(),fa=r("th"),ua=x("rusak"),da=$(),pa=r("th"),va=$(),ma=r("tbody");for(let a=0;a<$a.length;a+=1)$a[a].c();ba=$(),I(Ea.$$.fragment),this.h()},l(r){s=e(r,"DIV",{class:!0});var c=l(s);t=e(c,"SECTION",{class:!0});var i=l(t);n=e(i,"DIV",{class:!0});var h=l(n);f=w(h,"history pembelian / produk #"),u=w(h,a[0]),d=w(h," -- "),v=w(h,ya),h.forEach(o),m=D(i),E=e(i,"DIV",{class:!0}),l(E).forEach(o),i.forEach(o),g=D(c),T=e(c,"SECTION",{});var p=l(T);y=e(p,"TABLE",{class:!0});var b=l(y);V=e(b,"THEAD",{});var x=l(V);J=e(x,"TR",{});var $=l(J);q=e($,"TH",{rowspan:!0});var k=l(q);A=w(k,"no."),k.forEach(o),L=D($),S=e($,"TH",{rowspan:!0});var I=l(S);_=w(I,"harga beli"),I.forEach(o),z=D($),C=e($,"TH",{rowspan:!0});var H=l(C);F=w(H,"harga jual"),H.forEach(o),K=D($),G=e($,"TH",{colspan:!0});var B=l(G);M=w(B,"stok"),B.forEach(o),X=D($),Z=e($,"TH",{}),l(Z).forEach(o),$.forEach(o),aa=D(x),sa=e(x,"TR",{});var N=l(sa);ta=e(N,"TH",{});var R=l(ta);ra=w(R,"awal"),R.forEach(o),ea=D(N),la=e(N,"TH",{});var O=l(la);oa=w(O,"tersedia"),O.forEach(o),ca=D(N),na=e(N,"TH",{});var U=l(na);ia=w(U,"terjual"),U.forEach(o),ha=D(N),fa=e(N,"TH",{});var P=l(fa);ua=w(P,"rusak"),P.forEach(o),da=D(N),pa=e(N,"TH",{}),l(pa).forEach(o),N.forEach(o),x.forEach(o),va=D(b),ma=e(b,"TBODY",{});var Q=l(ma);for(let a=0;a<$a.length;a+=1)$a[a].l(Q);Q.forEach(o),b.forEach(o),p.forEach(o),ba=D(c),j(Ea.$$.fragment,c),c.forEach(o),this.h()},h(){c(n,"class","font-bold text-lg"),c(E,"class","flex-grow"),c(t,"class","bg-white flex items-center px-4 py-2"),c(q,"rowspan","2"),c(S,"rowspan","2"),c(C,"rowspan","2"),c(G,"colspan","4"),c(y,"class","jo-table"),c(s,"class","cont")},m(a,r){i(a,s,r),h(s,t),h(t,n),h(n,f),h(n,u),h(n,d),h(n,v),h(t,m),h(t,E),h(s,g),h(s,T),h(T,y),h(y,V),h(V,J),h(J,q),h(q,A),h(J,L),h(J,S),h(S,_),h(J,z),h(J,C),h(C,F),h(J,K),h(J,G),h(G,M),h(J,X),h(J,Z),h(V,aa),h(V,sa),h(sa,ta),h(ta,ra),h(sa,ea),h(sa,la),h(la,oa),h(sa,ca),h(sa,na),h(na,ia),h(sa,ha),h(sa,fa),h(fa,ua),h(sa,da),h(sa,pa),h(y,va),h(y,ma);for(let a=0;a<$a.length;a+=1)$a[a].m(ma,null);h(s,ba),H(Ea,s,null),Ta=!0},p(a,[s]){if((!Ta||1&s)&&k(u,a[0]),(!Ta||2&s)&&ya!==(ya=a[1].title+"")&&k(v,ya),60&s){let t;for(xa=a[2],t=0;t<xa.length;t+=1){const r=Q(a,xa,t);$a[t]?$a[t].p(r,s):($a[t]=W(r),$a[t].c(),$a[t].m(ma,null))}for(;t<$a.length;t+=1)$a[t].d(1);$a.length=xa.length}const t={};32816&s&&(t.$$scope={dirty:s,ctx:a}),!ga&&8&s&&(ga=!0,t.show=a[3],U((()=>ga=!1))),Ea.$set(t)},i(a){Ta||(p(Ea.$$.fragment,a),Ta=!0)},o(a){b(Ea.$$.fragment,a),Ta=!1},d(a){a&&o(s),B($a,a),N(Ea)}}}async function M(a){return a.params}function X(a,s,t){let{id:r}=s,e={},l=[],o=!1,c={},n=0;async function i(a){try{t(2,l=await _({url:"/api/v1/items/product/"+a}))}catch(a){console.log(a)}}V((()=>{!async function(a){try{t(1,e=await _({url:"/api/v1/product/"+a}))}catch(a){console.log(a)}}(r),i(r)}));return a.$$set=a=>{"id"in a&&t(0,r=a.id)},[r,e,l,o,c,n,async function(){const a={defective:n},s=`/api/v1/items/${c.id}/defect`;try{await S({url:s,payload:a})}catch(a){console.log(a),alert("gagal mengubah jumlah barang rusak")}finally{t(3,o=!1),await i(r)}},a=>{t(4,c={...a}),t(5,n=isNaN(a.defective)?0:a.defective),t(3,o=!0)},function(){n=J(this.value),t(5,n)},function(a){o=a,t(3,o)}]}export default class extends a{constructor(a){super(),s(this,a,X,G,t,{id:0})}}export{M as preload};
