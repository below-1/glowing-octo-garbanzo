import{a as e}from"./api.385c9671.js";import{z as t,A as r,B as n,v as i,C as a}from"./client.42fd2496.js";function l(e,t){var r=parseFloat(t[0]);return(isNaN(e)?e.length:parseFloat(e))>=r}function s(e,t){var r=parseFloat(t[0]),n=isNaN(e)?e.length:parseFloat(e);return!!isNaN(n)||n<=r}var o=Object.freeze({__proto__:null,between:function(e,t){return l(e,[t[0]])&&s(e,[t[1]])},email:function(e,t){return Boolean(e)&&/^[a-zA-Z0-9_+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,7}$/.test(e)},max:s,min:l,required:function(e,t){return null!=e&&("string"!=typeof e||e.replace(/\s/g,"").length>0)},url:function(e,t){return/(https?|ftp|git|svn):\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)},equal:function(e,t){return e===t[0]}});function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){return e.value}function f(e){return!!e.then}function d(e,t,r){var n=r.stopAtFirstFieldError,l=e.name,s=e.value,u=e.validators,c=void 0===u?[]:u,d=e.enabled,v=!0,p=!1,b=[];return(void 0===d||d)&&c.some((function(e){var r=function(e,t,r,n){var i,a=!0,l=!1;if(!1===(!(arguments.length>4&&void 0!==arguments[4])||arguments[4]))return[a,i,l];if("function"==typeof r){var s=r.call(null,t);f(s)?(l=!0,s.then((function(t){var r=t.name,i=t.valid;n.update((function(t){return t.fields[e]=t.fields[e]||{errors:[]},t.fields[e].pending=!1,t.fields[e].valid=i,i||t.fields[e].errors.push(r),t.valid=!Object.keys(t.fields).find((function(e){return!t.fields[e].valid})),t}))}))):(a=s.valid,i=s.name)}else{var u=r.split(/:/g);i=u.shift(),a=o[i].call(null,t,u)}return[a,i,l]}(l,s,e,t),u=i(r,3),c=u[0],d=u[1],O=u[2];if(!p&&O&&(v=!1,p=!0),!c)return v=!1,b=[].concat(a(b),[d]),n})),{data:e,valid:v,errors:b,pending:p}}function v(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.call(),a=Object.fromEntries(Object.keys(i).map((function(e){return[e,{name:i[e].name||e,value:i[e].value}]})));n=Object.assign({initCheck:!0,validateOnChange:!0,stopAtFirstError:!1,stopAtFirstFieldError:!0},n);var l=t({fields:{},oldFields:{},dirty:!1,valid:!0,initCheck:n.initCheck}),s=l.subscribe,o=l.set,u=l.update;return n.validateOnChange&&r((function(){return p(e,l,a,n)})),n.initCheck&&p(e,l,a,n),{subscribe:s,set:o,update:u,validate:function(){p(e,l,a,n)},reset:function(){var t=e.call();a=Object.fromEntries(Object.keys(t).map((function(e){return[e,{name:t[e].name||e,value:t[e].value}]}))),p(e,l,a,n)}}}function p(t,r,i,a){var l=t.call(),s=n(r),o={fields:{},oldFields:{},dirty:!1,initCheck:a.initCheck};Object.keys(l).some((function(t){var n=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({name:t},l[t]),f=s.fields[t]||{data:{},errors:[],pending:!1,valid:!0,enabled:!0,dirty:!1},v=i[t],p=c(n),b=c(f),O=n.enabled;if(O===f.enabled&&p&&p===b?(o.fields[t]=s.fields[t],O||(o.fields[t].valid=!0,o.fields[t].errors=[])):o.fields[t]=d(n,r,a),p!==v.value&&(o.dirty=!0),o.fields[t].dirty=p!==v.value,o.oldFields[t]=Object.assign({},f),a.stopAtFirstError)return!o.fields[t].valid})),o.valid=!Object.keys(o.fields).find((function(e){return!o.fields[e].valid})),r.set(o)}export{v as f};
